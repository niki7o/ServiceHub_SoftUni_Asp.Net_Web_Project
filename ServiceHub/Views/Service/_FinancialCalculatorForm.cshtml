@using ServiceHub.Common
@{
    ViewData["Title"] = "Финансов Калкулатор / Анализатор";
    var serviceId = ViewData["ServiceId"] ?? ViewBag.ServiceId ?? "2EF43D87-D749-4D7D-9B7D-F7C4F527BEA7";
}

<head>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="~/css/financialCalculator.css" asp-append-version="true" />
    <script src="~/js/financialCalculator.js" asp-append-version="true"></script>
  
</head>

<div class="container mt-4">
    

    <h2 class="text-center">Финансов Калкулатор / Анализатор</h2>

    <div class="calculator-form-container">
        <form id="financialCalculatorForm" method="post" enctype="multipart/form-data" action="/api/FinancialCalculator/calculate">
            <div class="row">
                <div class="col-md-6">
                    <h3>Анализ на възвръщаемост на инвестициите (ROI)</h3>
                    <div class="form-group mb-4">
                        <label for="netProfitForROI">Нетна печалба (за ROI) (лв.):</label>
                        <input type="number" step="0.01" class="form-control" id="netProfitForROI" name="NetProfitForROI" value="0" min="-1000000000" max="1000000000">
                        <div class="text-danger" id="netProfitForROIError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="costOfInvestment">Цена на инвестицията (лв.):</label>
                        <input type="number" step="0.01" class="form-control" id="costOfInvestment" name="CostOfInvestment" value="0" min="0.01" max="1000000000">
                        <div class="text-danger" id="costOfInvestmentError"></div>
                    </div>

                    <h3>Приходи</h3>
                    <div id="revenueItemsContainer">
                        
                    </div>
                    <button type="button" id="addRevenueItemBtn" class="btn add-item-btn">
                        <i class="fas fa-plus-circle me-2"></i> Добави приход
                    </button>
                    <div class="text-danger" id="revenueItemsError"></div>
                </div>

                <div class="col-md-6">
                    <h3>Разходи</h3>
                    <div id="expenseItemsContainer">
                       
                    </div>
                    <button type="button" id="addExpenseItemBtn" class="btn add-item-btn">
                        <i class="fas fa-plus-circle me-2"></i> Добави разход
                    </button>
                    <div class="text-danger" id="expenseItemsError"></div>

                    <h3>Прогноза</h3>
                    <div class="form-group mb-4">
                        <label for="growthRatePercentage">Процент на растеж (на период, %):</label>
                        <input type="number" step="0.01" class="form-control" id="growthRatePercentage" name="GrowthRatePercentage" value="0" min="0" max="100">
                        <div class="text-danger" id="growthRatePercentageError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="forecastPeriodMonths">Период на прогноза (месеци):</label>
                        <input type="number" step="1" class="form-control" id="forecastPeriodMonths" name="ForecastPeriodMonths" value="12" min="1" max="120">
                        <div class="text-danger" id="forecastPeriodMonthsError"></div>
                    </div>

                    <div class="form-group mb-4">
                        <label for="notes">Бележки (по избор):</label>
                        <textarea class="form-control" id="notes" name="Notes" rows="3" maxlength="1000" placeholder="Допълнителни бележки към финансовия отчет."></textarea>
                        <div class="text-danger" id="notesError"></div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-5">
                <button type="submit" class="btn btn-primary">Генерирай Финансов Отчет</button>
            </div>
        </form>
        <div id="messageArea" class="mt-4"></div>
    </div>
</div>


