@using ServiceHub.Common
@{
    ViewData["Title"] = "Генератор на Инвойси/Фактури";
    var serviceId = ViewData["ServiceId"] ?? ViewBag.ServiceId ?? "B422F89B-E7A3-4130-B899-7B56010007E0"; 
}

<head>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<link rel="stylesheet" href="~/css/invoiceGenerator.css" asp-append-version="true" />
	<script src="~/js/invoiceGenerator.js" asp-append-version="true"></script>
    
</head>

<div class="container mt-4">
   

    <h2 class="text-center">Генератор на Инвойси/Фактури</h2>

    <div class="invoice-form-container">
        <form id="invoiceGeneratorForm" method="post" enctype="multipart/form-data" action="/api/InvoiceGenerator/generate">
            <div class="row">
                <div class="col-md-6">
                    <h3>Данни за фактурата</h3>
                    <div class="form-group mb-4">
                        <label for="invoiceNumber">Номер на фактура:</label>
                        <input type="text" class="form-control" id="invoiceNumber" name="InvoiceNumber" required maxlength="50" placeholder="Напр. 20240001">
                        <div class="text-danger" id="invoiceNumberError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="issueDate">Дата на издаване:</label>
                        <input type="date" class="form-control" id="issueDate" name="IssueDate" required>
                        <div class="text-danger" id="issueDateError"></div>
                    </div>

                    <h3>Данни за продавача</h3>
                    <div class="form-group mb-4">
                        <label for="sellerName">Име/Фирма на продавача:</label>
                        <input type="text" class="form-control" id="sellerName" name="SellerName" required maxlength="200" placeholder="Напр. 'Моята Фирма' ООД">
                        <div class="text-danger" id="sellerNameError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="sellerAddress">Адрес на продавача (по избор):</label>
                        <input type="text" class="form-control" id="sellerAddress" name="SellerAddress" maxlength="500" placeholder="Напр. гр. София, ул. 'Примерна' №10">
                        <div class="text-danger" id="sellerAddressError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="sellerEIK">ЕИК/БУЛСТАТ на продавача (по избор):</label>
                        <input type="text" class="form-control" id="sellerEIK" name="SellerEIK" maxlength="50" placeholder="Напр. 123456789">
                        <div class="text-danger" id="sellerEIKError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="sellerMOL">МОЛ на продавача (по избор):</label>
                        <input type="text" class="form-control" id="sellerMOL" name="SellerMOL" maxlength="50" placeholder="Напр. Иван Петров">
                        <div class="text-danger" id="sellerMOLError"></div>
                    </div>
                </div>

                <div class="col-md-6">
                    <h3>Данни за купувача</h3>
                    <div class="form-group mb-4">
                        <label for="buyerName">Име/Фирма на купувача:</label>
                        <input type="text" class="form-control" id="buyerName" name="BuyerName" required maxlength="200" placeholder="Напр. 'Вашата Фирма' ЕООД">
                        <div class="text-danger" id="buyerNameError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="buyerAddress">Адрес на купувача (по избор):</label>
                        <input type="text" class="form-control" id="buyerAddress" name="BuyerAddress" maxlength="500" placeholder="Напр. гр. Пловдив, бул. 'Централен' №5">
                        <div class="text-danger" id="buyerAddressError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="buyerEIK">ЕИК/БУЛСТАТ на купувача (по избор):</label>
                        <input type="text" class="form-control" id="buyerEIK" name="BuyerEIK" maxlength="50" placeholder="Напр. 987654321">
                        <div class="text-danger" id="buyerEIKError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="buyerMOL">МОЛ на купувача (по избор):</label>
                        <input type="text" class="form-control" id="buyerMOL" name="BuyerMOL" maxlength="50" placeholder="Напр. Мария Иванова">
                        <div class="text-danger" id="buyerMOLError"></div>
                    </div>

                    <h3>Допълнителни настройки</h3>
                    <div class="form-group mb-4">
                        <label for="discountPercentage">Отстъпка (%):</label>
                        <input type="number" step="0.01" class="form-control" id="discountPercentage" name="DiscountPercentage" min="0" max="100" value="0">
                        <div class="text-danger" id="discountPercentageError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="taxRatePercentage">Данъчна ставка (%):</label>
                        <input type="number" step="0.01" class="form-control" id="taxRatePercentage" name="TaxRatePercentage" min="0" max="100" value="20">
                        <div class="text-danger" id="taxRatePercentageError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="paymentMethod">Начин на плащане (по избор):</label>
                        <input type="text" class="form-control" id="paymentMethod" name="PaymentMethod" maxlength="500" placeholder="Напр. Банков превод, В брой">
                        <div class="text-danger" id="paymentMethodError"></div>
                    </div>
                    <div class="form-group mb-4">
                        <label for="notes">Бележки (по избор):</label>
                        <textarea class="form-control" id="notes" name="Notes" rows="3" maxlength="1000" placeholder="Допълнителни бележки към фактурата."></textarea>
                        <div class="text-danger" id="notesError"></div>
                    </div>
                </div>
            </div>

            <h3 class="mt-4">Артикули</h3>
            <div id="invoiceItemsContainer">
             
            </div>
            <button type="button" id="addItemBtn" class="btn add-item-btn">
                <i class="fas fa-plus-circle me-2"></i> Добави артикул
            </button>
            <div class="text-danger" id="itemsError"></div>


            <div class="text-center mt-5">
                <button type="submit" class="btn btn-primary">Генерирай Фактура</button>
            </div>
        </form>
        <div id="messageArea" class="mt-4"></div>
    </div>
</div>

@section Scripts {
    <script>
       
    </script>
}
